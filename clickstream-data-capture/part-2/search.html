<!DOCTYPE html>
<html>
<head>
	<script>
		function captureSearchTermEvent() {
			var path = window.location.pathname;
			var page = path.split("/").pop();
			var searchTerm = getSearchTerm(window.location.search.substring(1));
			var img = new Image(1, 1);
			var queryParams = 'pageName=' + page + '&action=search&searchTerm=' + searchTerm;
			img.src = 'http://localhost:9000/_.gif?' + queryParams;
			document.getElementById("trackingPixel").appendChild(img);
		}
		
		function getSearchTerm(queryString){
			var queries = queryString.split("&");
			var searchTerm;
			for (var i = 0; i < queries.length; i++ ) {				
				if(queries[i].indexOf("searchTerm") > -1){
					var temp = queries[i].split('=');
					searchTerm = temp[1];
					break;
				}
			}
			return searchTerm;
		}
	</script>
</head>

<body onload="captureSearchTermEvent()">
	<h1>Search Results</h1>
	<br/>
	<div id="searchResults">
	<hr/>
		<table>
			<tr><td>Result 1</td></tr>
			<tr><td>Result 2</td></tr>
			<tr><td>Result 3</td></tr>
			<tr><td>Result 4</td></tr>
			<tr><td>Result 5</td></tr>
			<tr><td>Result 6</td></tr>
		</table>
	</div>
	<hr/>
	<br/>
	<a href="/home">Home</a>
	<div id="trackingPixel"></div>
</body>

</html>